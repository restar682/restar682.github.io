---
title: 计网学习笔记-6
date: 2025-11-08 11:51:42
categories: 计网
description: 《计算机网络——自顶向下方法》第六章学习笔记。
tags: [计算机网络, 链路层, 局域网]
---
# 链路层
## 链路层概述
### 链路层服务
链路层的基本服务是将数据报通过单一通信链路从一个节点移动到相邻节点，但所提供的服务细节会随着链路层协议的不同而有所变化。链路层能够提供的可能服务包括：

1. **成帧**
   在网络层数据报通过物理链路传输之前，几乎所有的链路层协议都会将其封装在链路层帧中。一个帧通常由一个数据字段和若干首部字段组成，其中网络层数据报被置于数据字段内，其余结构如首部和可能的尾部则由具体的链路层协议定义。
2. **链路接入**
   链路接入由媒体访问控制（Medium Access Control, MAC）协议规定，用于管理帧在共享链路上的传输规则。
   - 对于点对点链路，即链路一端仅有一个发送方，另一端仅有一个接收方，MAC 协议通常非常简单，甚至可以省略：只要链路空闲，发送方即可立即发送帧。
   - 更复杂的情形出现在多个节点共享同一广播链路的场景，即多路访问问题。此时，MAC 协议的作用是协调多个节点对链路的访问，防止帧冲突并确保有序传输。
3. **可靠交付**
   某些链路层协议提供可靠交付服务，即保证每个网络层数据报都能无差错地通过链路层传输。这与运输层如 TCP 的可靠交付机制类似，通常通过确认 ACK 和重传机制实现。
   链路层的可靠交付主要用于高误码率的链路，如无线链路，其优势在于能够在错误发生的本地链路上及时纠正，避免触发端到端的重传，从而提升效率。
   然而，在误码率极低的有线链路，如光纤、同轴电缆或高质量双绞线，链路层可靠交付往往被视为不必要的开销。因此，许多现代有线链路层协议如以太网并不提供此项服务。
4. **差错检测与纠正**
   由于信号衰减和电磁干扰，帧在传输过程中可能出现比特错误。为了避免转发含错的数据，大多数链路层协议都包含差错检测机制。
   具体实现方式是：发送方在帧中附加差错检测比特，如 CRC 校验码，接收方则利用这些信息验证帧的完整性。与网络层和运输层使用的简单校验和如 IP 或 TCP 校验和相比，链路层的差错检测通常更强大，并由硬件高效实现。
   差错纠正则更进一步，不仅能够检测错误，还能定位并修正帧中的错误比特。不过，差错纠正机制较为复杂，通常仅在特定高误码环境中使用，如卫星或深空通信。

### 主机的网络层和链路层
与路由器不同，主机既不参与分组转发，也不承担网络中继功能，因此其网络层和链路层的实现均围绕“端系统通信”这一目标设计，从而与路由器存在显著差异。

- **网络层**完全由操作系统中的软件实现，运行在主机的主 CPU 上。它仅负责构造或解析本机收发的 IP 数据报，不执行任何转发操作。
- **链路层**则主要实现在**网络适配器**（即网卡）中。适配器的核心是链路层控制器，它通常是一个实现了多种链路层服务的专用芯片，以硬件方式高效完成成帧、链路接入、差错检测等底层操作。不过，链路层并非纯硬件实现，诸如设置帧头地址、触发发送、处理接收中断等高层控制逻辑，仍由运行在主机 CPU 上的驱动程序中完成。

因此，主机的链路层是**硬件与软件的结合体**：硬件处理高频、时序敏感的底层任务，软件则负责与操作系统及上层协议栈的交互。这种协同设计在保证性能的同时，也保留了必要的灵活性。

相比之下，路由器的网络层和链路层都面向转发优化，链路层实现在线路卡的专用硬件中，网络层也常由硬件加速以实现高效转发。而主机的协议栈则专注于端到端通信，网络层纯软件、链路层软硬协同，两者设计目标与实现方式迥然不同。
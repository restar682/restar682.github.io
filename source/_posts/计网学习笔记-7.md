---
title: 计网学习笔记-7
date: 2025-11-29 17:31:07
categories: 计网
description: 《计算机网络——自顶向下方法》第七章学习笔记。
tags: [计算机网络, 无线网络, 移动网络]
---
# 无线网络和移动网络
从网络视角来看，无线通信与移动性毫无疑问地共同引入了有别于传统有线网络的一系列新挑战，尤其体现在链路层和网络层。因此，这部分内容有必要单独讨论。（其实是我确实很好奇啊 awa）

需要首先区分两个概念：**无线性**指通信链路通过无线电波建立，而非依赖物理线缆；**移动性**则指终端在网络中动态变更接入位置。两者并非必然同时出现，例如家用 Wi-Fi 下的台式机具备无线性却缺乏移动性，而用户携带笔记本从家到公司并改用有线网络时则具备移动性但不具备无线性。最复杂的情形无疑是二者的叠加情况，比如用户在高速移动的车辆中持续进行语音或数据通信。

本章将以这一交集为主线展开：首先介绍无线用户如何经由网络边缘的无线链路接入更大的（通常是有线的）网络基础设施；随后分析无线链路的特性，并简述蜂窝系统中广泛采用的码分多址（CDMA）。接着深入阐述 IEEE 802.11（Wi-Fi）的链路层机制，并概览蓝牙等个人域网技术；之后介绍 3G 与 4G/LTE 等蜂窝接入技术，它们统一支持语音与高速数据业务；再进一步讨论移动性管理，包括位置更新、路由维护与切换等核心问题；并说明企业 Wi-Fi 与 LTE 网络中如何利用移动 IP 来实现无缝移动服务。最后，本章将探讨无线性和移动性对传输层协议（如 TCP）以及实时视频等网络应用的影响。

通过以上内容，我们将整体理解无线与移动网络的核心运行原理，以及它们在设计上面临的主要挑战。

## 概述
本章讨论的无线与移动网络场景涵盖了从 Wi-Fi 到 4G 在内的多种技术。为了建立一致的理解，我们首先引入几个关键概念：

- **无线主机**：运行应用的端系统设备，如手机、笔记本、平板或嵌入式设备。它可以是静止的，也可以移动。  
- **无线链路**：主机通过**无线通信链路**与基站或其他设备通信的通道。不同技术（如 Wi-Fi、蜂窝）在速率和覆盖范围上差异很大，且性能受距离、干扰和用户数量影响。  
- **基站**：无线网络中的核心基础设施，在有线网络中没有直接对应设备。它负责与主机进行无线通信，接收数据并将其接入更大的网络（如互联网），同时负责协调其覆盖区域内主机的传输。典型例子包括蜂窝网络的**蜂窝塔**以及无线局域网中的**接入点**（Access Point, AP）。
- **网络基础设施**：指无线主机最终要访问的更大网络，如因特网或企业内网。

当主机位于基站覆盖范围内，并通过基站接入网络时，被称作以**基础设施模式**运行。在这种模式下，所有地址分配、路由等传统的网络服务都由网络基础设施统一提供。另一种通信方式是**自组织网络**（ad hoc），在这种网络中，没有基站存在，主机之间直接通信，必须自行完成路由、地址配置、类似 DNS 的域名转换等功能。

当移动主机从一个基站覆盖区进入另一个时，需要**切换**到新的基站。由此产生了一系列挑战，包括如何定位移动设备、如何为其分配地址，以及如何在移动过程中保持 TCP 连接或语音通话的连续性。

根据无线通信是单跳还是多跳，以及网络中是否存在基站等基础设施，可将无线网络划分为四类：

1. **单跳，基于基础设施**：  
   主机通过一个无线跳与基站通信，基站再连入有线网络。  
   **典型代表**：家庭/办公室 Wi-Fi、4G/5G 蜂窝网络。这是最常见、最主流的类型。

2. **单跳，无基础设施**：  
   无基站，主机直接通信，但通常由其中一个设备协调（如蓝牙主从模式）。  
   **典型代表**：蓝牙耳机、键盘，或 Wi-Fi 直连（自组织模式）。

3. **多跳，基于基础设施**：  
   主机通过多个无线节点中继，最终到达有线连接的基站。  
   **典型代表**：无线网状网络、某些传感网络。

4. **多跳，无基础设施**：  
   无基站，通信需经多个移动节点中继。  
   **典型代表**：移动自组织网络（MANET）、车联网（VANET）。这类网络协议设计复杂，仍在研究中。

## 无线链路和网络特征
如果用无线 802.11 网络替换有线以太网，也就是让无线网络接口取代有线以太网接口、让 AP 取代交换机，那么在网络层及以上几乎不需要做任何调整。这说明，有线与无线网络之间最核心的差异主要体现在链路层。

无线链路与有线链路相比，面临几个特有的挑战：

- **信号衰减**：电磁波在传播过程中会因距离增加而减弱（称为路径损耗），穿墙或障碍物时还会进一步衰减。  
- **干扰**：多个设备若使用相同频段（如 2.4 GHz 的 Wi-Fi 与无线电话），会相互干扰；此外，微波炉、电机等电器也会产生电磁噪声。  
- **多径传播**：信号经不同路径（如反射、绕射）到达接收端，导致波形叠加失真，且随环境变化而动态改变。

这些因素使得**无线链路的比特错误率显著高于有线链路**。因此，无线协议（如 802.11）不仅使用强效的 CRC 进行差错检测，还引入**链路层 ARQ 机制**，对出错的帧进行自动重传。

考虑了噪声后，可以知道接收端收到的信号是原始信号的退化版本与环境噪声的混合。衡量信号质量的关键指标是**信噪比**（Signal-to-Noise Ratio, SNR），也即所收到的信号和噪声强度的相对测量。SNR 越高，接收方越容易从噪声中正确恢复数据。

虽然不同的调制方式（如 BPSK、QAM）和编码策略会影响传输效果，但在相同调制条件下，SNR 越高，**比特差错率**（BER）就越低这一规律始终成立。发送方可以通过提高发射功率来提升 SNR，从而降低误码率并增强可靠性，但功率带来的收益并非无限增长。当 BER 已经非常低（例如从 $10^{-12}$ 再降到 $10^{-13}$）时，继续增大发射功率带来的改善几乎可以忽略不计，反而会引发额外问题，例如移动设备能耗升高，以及更强信号导致的无线干扰加剧。

此外，调制方式的选择也需要在速率与可靠性之间进行权衡。在相同的 SNR 下，高速调制方式（如 QAM16）通常会比低速调制方式更容易出错。例如，在 SNR 为 10 dB 时，低速的 BPSK 可以保持极低的误码率，而高速的 QAM16 误码率可能高到无法应用；但当 SNR 提升到 20 dB 时，QAM16 就能够在可接受的误码率下工作，从而提供更高的吞吐量。

因此，现代无线系统（如 Wi-Fi 和 4G/5G）普遍采用**自适应调制与编码**（AMC），根据实时信道状况（如 SNR）动态选择合适的调制方式和编码率，在保证误码率满足要求的同时尽可能提高传输速率。

除了更高且随时间变化的误码率外，无线链路还面临有线网络所没有的另一类挑战，就是多路访问更加复杂。在有线广播网络中，所有节点都能清晰地“听到”彼此的传输，因而容易进行协调；而在无线环境中，由于**隐藏终端问题**和**信号衰减**的存在，节点往往无法准确判断其他节点的发送情况，使得多路访问控制变得更加困难。

- **隐藏终端问题**：两个发送方（A 和 C）彼此无法侦听到对方，却同时向同一个接收方（B）发送，导致在 B 处发生碰撞，而 A 和 C 并不知道冲突发生；  
- **信号衰减**：即使 A 和 C 距离不远，其信号在传播中可能已衰减到无法被对方检测，但仍足以在接收端相互干扰。

这些现象使得无线网络中的碰撞更难避免和检测，因此其多路访问机制（如 802.11 的 RTS/CTS）比有线网络复杂得多。

### CDMA
在上一章中我们提到，当多个设备共享同一通信媒介时，需要多路访问协议来避免彼此干扰。CDMA 的做法是为每个发送方分配一个独特的编码序列。所有用户可以同时占用整个频带，但各自通过不同的码对数据进行标记，从而在接收端得以区分。

在 CDMA 中，每个待发送的数据比特都会被扩展成一串速率更高的“码片”，这一过程称为**扩频**。其基本做法是使用预先分配的、独特的编码序列去调制原始数据比特，使不同用户的比特在同一频带中以各自的码片序列区分开来。用于调制的编码序列变化得非常快，其变化速率（即**码片速率**）远高于原始比特序列的变化速率。

假设一个数据比特持续一个比特时隙，并被划分为 $M$ 个码片时隙（如 $M=8$，实际系统中常更大）。发送方为每个比特分配一个由 $+1$ 和 $-1$ 组成的长度 $M$ 的编码向量。为便于数学处理，原始比特 0 映射为 $-1$，1 映射为 $+1$。发送时，将比特值与该编码向量逐分量相乘，即可得到包含 $M$ 个码片的发送向量，从而将低速比特流扩展为高速的码片序列。

在接收端，将收到的码片序列视为一个向量。接收方用和发送方相同的编码序列向量与该接收向量做内积并归一化，就能恢复出自身的原始比特。原因在于若不同用户的编码序列近似正交，则它们的向量内积接近于零。于是，在接收到的混合信号中，各用户信号相加可写为多个“编码向量的线性组合”。当接收方与自己的编码向量做内积时，只有对应项会产生非零的放大效果，其余用户的编码因正交而被抵消，从而实现同时发送、互不干扰的多址接入。

一个简单的 CDMA 例子如下图：
<figure style="text-align: center;">
<img src="/illustrations/计网笔记7/1.png" alt="简单的 CDMA 例子" width="70%">
<figcaption>简单的 CDMA 例子</figcaption>
</figure>

因此，CDMA 通过“编码划分”实现了多用户共享同一频段，其有效性依赖精心设计的正交编码和合理的功率控制。具体来说，首先编码设计要足够优良，使不同用户的信号在数学上可分离，其次要保证各信号到达接收端的强度相近，否则强信号可能淹没弱信号。而尽管实际部署中存在同步和功率控制等挑战，CDMA 的优势在于**频谱利用率高、抗干扰能力强**，特别适合无线环境，因此成为早期 3G 蜂窝系统的核心技术之一。

## WiFi：802.11 无线 LAN
如今，无线局域网（WLAN）已无处不在，无论是办公室、家庭、校园、机场，还是街头，都能看到它的身影，成为互联网接入的重要方式。在众多早期标准中，**IEEE 802.11**（即 Wi-Fi）最终脱颖而出，成为主流。

尽管 802.11 协议族包含多个版本，但它们共享几个关键特性：  
- 使用相同的**链路层帧结构**；  
- 采用统一的**媒体访问控制协议**（CSMA/CA，稍后详述）；  
- 支持**速率自适应**：信号弱时自动降低速率以延长传输距离；  
- **向后兼容**：老设备（如仅支持 802.11g 的手机）仍能与新基站（如 802.11ac）通信。

它们的主要差异体现在**物理层**，尤其是工作频段和速率。2.4 GHz 频段（2.4–2.485 GHz）无需授权，覆盖范围较广，但易受微波炉、蓝牙等设备干扰；5 GHz 频段（5.1–5.8 GHz）干扰少、速率高，但穿墙能力弱，传输距离较短。较新的标准如 **802.11n** 和 **802.11ac** 引入了**多输入多输出**（MIMO）技术，通过多个天线同时收发不同数据流显著提升吞吐量和可靠性。802.11ac 还支持**多用户 MIMO**和**波束成形**，能够将信号能量集中指向目标设备，减少干扰并增强覆盖。

需要注意的是，标称速率（如 1300 Mbps）是在理想环境下测得的，例如在近距离且无干扰的条件下。实际使用中，速率通常远低于标称值。

总体而言，802.11 通过统一架构、平滑演进和强大兼容性，奠定了其在无线接入领域的主导地位。
---
title: 计网学习笔记-1
date: 2025-10-13 15:51:30
categories: 计网
description: 《计算机网络——自顶向下方法》第一章学习笔记。
tags: [计算机网络, 因特网]
---
# 因特网
## 基本概念
因特网是一个互联了全世界数十亿计算设备的网络，这些设备包括个人计算机、平板电脑、智能手机、服务器等，他们被称作主机（host）或端系统（end system）。

主机通过通信链路（communication link）和分组交换机（packet switch）互联。通信链路由不同类型的物理介质（如光纤、铜缆或无线信道）构成，各类链路的数据传输速率各不相同，单位是比特/秒（bps）。当一台主机向另一台主机发送数据时，发送主机会将数据分段并加上首字节，形成一个个分组。分组交换机主要有两种：路由器（router）和链路层交换机（link-layer switch），路由器连接不同的网络，而交换机连接同一网络内的设备。

主机通过因特网服务提供商（Internet Service Provider, ISP）连接到因特网。每个 ISP 自身就是一个由多台分组交换机和多段通信链路构成的网络，他们为主机提供了各种不同类型的网络接入。ISP 有不同的层级：接入 ISP（如家庭宽带提供商）、区域 ISP（连接多个接入 ISP）和主干 ISP（连接多个区域 ISP）。但无论层级如何，所有 ISP 都是独立管理的，运行着 IP 协议，遵从一定的命名和地址规则。

主机、分组交换机和其他因特网部件都要运行一系列的协议，这些协议定义了设备间通信的规则。TCP（Transmission Control Protocol, 传输控制协议）和 IP（Internet Protocol, 网际协议）是因特网的核心协议，IP 定义在路由器和主机之间发送和接收的分组格式，而 TCP 则为应用程序提供可靠的端到端通信服务。因特网的主要协议统称为 TCP/IP。

## 网络边缘
如前所述，我们把与因特网相连的计算机和其他设备称作端系统，因为他们位于因特网的边缘。端系统也称主机，因为他们容纳（运行）应用程序。主机有时候被进一步分为两类：客户和服务器。客户通常是桌面 PC、移动 PC 和智能手机等，而服务器通常更加强大，运行着 Web 服务器、文件服务器、电子邮件服务器等。

### 接入网
**接入网**是指将终端主机物理连接到其边缘路由器的网络，常见的接入网类型包括：

- **数字用户线**（DSL, Digital Subscriber Line）：  
  利用现有电话线提供高速互联网接入，由本地电话公司作为 ISP。DSL 通过频分复用技术，在同一对电话线上同时传输语音（低频）和数据（高频）。其典型特征是**下行速率高于上行速率**。
- **电缆调制解调器**（Cable Modem）：  
  基于有线电视同轴电缆网络提供互联网接入。调制解调器将数字信号调制为适合电缆传输的射频信号。与 DSL 类似，**下行带宽通常远大于上行带宽**，且带宽在用户间共享。
- **光纤到户**（FTTH, Fiber to the Home）：  
  通过光纤直接连接用户家庭，可以提供极高的上下行速率，延迟低、稳定性好，但初期部署成本较高。
- **无线接入**：  
  无线接入主要包括局域范围的 Wi-Fi 和广域覆盖的蜂窝网络（如 4G、5G、LTE）。无线接入具有部署灵活、移动性强的优点，但其速率、延迟和可靠性易受距离、障碍物和干扰等因素影响。

### 物理媒体
物理媒体是指用于传输信号的物理介质，分为导引型媒体和非导引型媒体两大类，导引型媒体包括双绞铜线、同轴电缆和光纤，非导引型媒体主要是无线信道（包括陆地无线电和卫星无线电）。

## 网络核心
### 分组交换
在各类网络应用中，主机之间需要相互交换**报文**，在多种通信方式中，**分组交换**是实现报文传输的主要方式之一。报文既可以携带数据，也可以用于执行控制功能。当发送主机传输报文时，会将其划分为若干较小的数据单元，称为**分组**。每个分组通过通信链路和分组交换机，从源主机逐跳转发至目的主机。因此，若一个长度为 $L$ 比特的分组在速率为 $R$ 比特/秒（bps）的链路上传输，则其发送时延为 $\frac{L}{R}$ 秒。

#### 储存转发
多数分组交换机采用**储存转发**机制，即在转发分组之前，交换机必须先将整个分组接收完毕并存储在缓冲区中。

这种方式可确保分组完整性并支持差错检测，但会引入额外的处理时延——每个分组至少需经历一次完整的接收过程后才能被转发。

#### 排队时延和分组丢失
当分组到达交换机时，若输出链路正被其他分组占用，该分组便需在缓冲区中排队等待。

排队时延取决于当前队列长度、分组到达速率及链路处理能力，具有高度动态性，可能在毫秒到秒级之间波动，是网络时延中最不可预测的部分。

若分组到达速率持续超过链路处理能力，缓冲区可能会溢出，导致新到达的分组被丢弃，这种现象称为**分组丢失**。分组丢失会引发重传机制，进而影响整体网络性能。

#### 转发表和路由选择协议
路由器会通过**转发表**决定如何转发每个到达的分组。转发表通常基于分组的目的地的 IP 地址，指示分组应通过哪个输出链路转发。转发表依赖于**路由选择协议**来自动设置和维护，这些协议允许路由器动态地交换信息，更新其转发表以反映网络拓扑的变化。

### 电路交换
**电路交换**是与分组交换相对应的另一种通信方式。它通过在通信双方之间建立一条专用的通信路径来实现数据传输。所有通信所需的资源（如缓存、带宽）都会在连接建立时被预留，该路径在整个通信过程中保持不变。这种方式适用于需要持续、稳定连接的应用，如传统电话通信。然而，由于资源在连接期间被独占，电路交换在资源利用率和灵活性方面不如分组交换。

链路中的电路是通过频分复用（FDM）或时分复用（TDM）技术实现的。FDM 将链路的频谱划分为多个频段，每个频段用于不同的通信会话，该频段的宽度被称作带宽；TDM 则将时间划分为固定时长的帧，每个帧又被划分为固定数量的时隙，网络会在每个帧中为连接指定一个时隙。
<figure style="text-align: center;">
  <img src="/illustrations/计网笔记1/1.png" alt="FDM 和 TDM" width="60%">
  <figcaption>FDM 和 TDM</figcaption>
</figure>

对比来看，电路交换在通信前需建立专用的物理连接，通信期间独占链路资源，因此传输时延稳定，适合实时业务（如传统电话通信），但其资源利用率低、连接建立耗时且灵活性较差。相较之下，分组交换将数据拆分为分组，动态共享网络资源，无需预先建立连接，因而具有更高的资源利用率、更好的突发流量适应性和更强的扩展性。然而，分组交换存在排队时延和时延抖动，不适用于对时延敏感的实时应用。尽管如此，分组交换在总体性能上明显优于电路交换，也成为当今网络通信的主流发展方向。

### 网络的网络
当今的互联网是一个由众多网络互联而成的“网络的网络”，其结构庞大且层次分明。除最底层外，各级 ISP（互联网服务提供商）通常都设有**存在点（PoP）**作为接入节点，并可与不同层次的网络建立连接。任何 ISP 都可以选择**多宿（multihoming）**，即同时连接两个或多个上级 ISP 以提高可靠性和冗余性。处于相同层级的 ISP 之间还可以建立**对等连接**，直接交换彼此的流量。基于此机制形成了**互联网交换点（IXP）**，作为多个 ISP 的汇聚节点，使其能够高效地实现对等互联。除网络运营商外，互联网还包括**内容提供商（CDN）**和**数据中心（Data Center）**，它们通过部署服务器和缓存节点，为用户提供高效的数据访问与内容分发服务。

大致的网络结构图如下：
<figure style="text-align: center;">
  <img src="/illustrations/计网笔记1/2.png" alt="网络结构图" width="100%">
  <figcaption>网络结构图</figcaption>
</figure>

## 时延、丢包、吞吐量
### 时延概述
一个路由器的节点时延大致包含四部分：处理时延、排队时延、传输时延、传播时延。首先，路由器需要检查一个分组的首部并且据此决定将该分组导向何处，这导致了处理时延；其次，分组在链路上等待传输时，会有排队时延；再然后，将分组的每个比特推向链路也需要耗时，因此有微小的传输时延；最后，每个比特传到另一个路由器毫无疑问需要耗时，从而还要考虑传播时延。

### 排队时延和丢包
之所以我们反复强调排队时延，是因为它是节点时延中最为复杂的一部分。我们不难注意到排队时延与分组有关，因此我们往往会采用统计量来度量它。一个很重要的指标是**流量强度**，通常用符号 $\rho$ 表示，被用来衡量网络中**业务负载程度**。其定义公式为：

$$
\rho = \frac{L \cdot a}{R}
$$

其中 $L$ 为平均分组长度，$a$ 是平均分组到达率（分组/秒），$R$ 则是链路传输速率（bit/秒）。$\rho$ 表示链路在平均意义下被占用的比例，即**平均到达速率与服务速率的比值**。当 $\rho < 1$ 时，系统能稳定运行；当 $\rho \ge 1$ 时，链路将趋于过载，队列长度会不断增长。因此实际设计系统时一定会保证流量强度不大于1。

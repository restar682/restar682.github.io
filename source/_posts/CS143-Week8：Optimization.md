---
title: CS143-Week8：Optimization
date: 2025-09-28 15:43:27
categories: CS143
description: 
tags: [编译原理, Linux, CS143, 编译器优化]
---
编译原理的最后一个部分——编译器优化。编译器优化是编译器的核心，是最富有深度的一个部分，所以尽管没有对应的 PA，我们也来了解一下这个博大精深的部分。

# 中间表示（Intermediate Representation, IR）
IR 是一种介于源语言和目标语言之间的抽象代码形式。它既不像目标语言（如机器码）那样依赖具体硬件，也不像高级源语言（如 C、C++ 或 Rust）那样高度抽象，而是在两者之间提供了一个恰到好处的中间层次：既保留了足够的语义细节以支持深入分析，又具备良好的通用性和简洁性。

正因为这种特性，IR 非常适合用于编译过程中的代码优化。同时，它还能有效解耦编译器的前端与后端：前端负责将不同高级语言统一翻译为同一种 IR，后端就可以专注于将该 IR 转换为多种目标平台的机器码。这样一来，同一份 IR 可被不同架构的后端编译生成对应的可执行代码，真正实现“一次编译，多处生成”。

我们将要讨论的 IR 是一种高级汇编语言，主要特点包括：
- **无限寄存器**：使用寄存器名称，但寄存器数量理论上不受物理限制；  
- **汇编式控制结构**：具备跳转、标签等类似汇编的控制流机制；  
- **操作码抽象**：采用操作码（opcode）表示操作，其中部分具有更高层次的语义。  
  - 例如，一条 `push` 指令在 IR 中可能对应多条底层汇编指令；  
  - 大多数操作码仍与目标平台的汇编指令保持一一对应，便于后续翻译与优化。

事实上，每条指令都是一元或二元运算，并且右侧的参数始终是寄存器或常量。由于每条指令至多包含三个地址，因此被称作“三地址码”。通过将高级表达式分解成三地址码，我们实际上为每条指令都赋予了一个唯一的名称，也就是其目标地址。
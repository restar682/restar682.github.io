---
title: 计网学习笔记-2
date: 2025-10-19 10:51:16
categories: 计网
description: 《计算机网络——自顶向下方法》第二章学习笔记。
tags: [计算机网络, 应用层]
---
# 应用层
## 应用层协议
如前所述，应用软件的运行被限制在主机中，因此，我们只需专注于开发能够在不同端系统上运行并通过网络实现相互通信的程序，而无需关心网络核心设备的实现细节或兼容性问题。

### 应用程序体系结构
对于一个应用程序而言，网络的体系结构是固定的，它只是为应用提供了特定的服务集合，或者说接口。但应用程序自身的体系结构则是由研发者自己设计的，规定了如何在各个主机上组织该应用程序。现代网络应用程序有两种主流体系结构：客户——服务器体系结构、对等（P2P）体系结构。

在客户——服务器体系结构中，有一台始终处于开启状态的主机被称作**服务器**，它为许多其他被称作**客户**的主机提供服务。在这个体系结构中，客户相互之间并不通信，而服务器具有固定的 IP 地址，且始终保持打开，因此客户总是能够通过向该服务器的 IP 地址发送分组来与其建立联系。典型的基于该架构的应用包括 Web 浏览（HTTP）和电子邮件（SMTP、IMAP 等）。

而在 P2P 体系结构中，应用程序几乎不依赖（甚至完全不依赖）专用服务器，而是由间歇性连接的主机之间直接通信，这些主机被称为**对等方**。典型的 P2P 应用包括 **BitTorrent**（文件共享）、**Bitcoin**（去中心化数字货币）和 **Skype**（早期的语音通话），它们都依靠对等节点直接通信，无需依赖中心服务器。P2P 的最大优势之一在于其自扩展性，尽管每个对等方都由于请求文件产生负载，但他们本身向其它对等方分发文件也为系统增加了服务能力。然而，由于高度非集中式结构，P2P 结构也会面临安全性、性能等挑战。

### 进程通信
我们知道，进行通信的实际上是各个主机上的进程，他们通过交换报文来相互通信。为了方便叙述，我们称发起通信的进程为客户，等待联系的进程为服务器。

进程通过被称作**套接字**的软件接口向网络发送和接收报文。套接字位于同一台主机内应用层与运输层之间，本质上是应用程序与网络之间的 API。应用程序对其在应用层一侧的套接字拥有完全控制权，但在运输层一侧的控制非常有限：通常只能选择运输层协议（如 TCP 或 UDP），并设置少数参数（如最大缓存大小、最大报文段长度等）。一旦选定协议，应用程序便运行在该协议所提供的运输层服务之上，无法再干预其内部机制（如拥塞控制或重传策略）。大致流程如图：

<figure style="text-align: center;">
  <img src="/illustrations/计网笔记2/1.png" alt="套接字" width="80%">
  <figcaption>套接字</figcaption>
</figure>

为了向另一台主机发送分组，我们需要目的主机的地址和指定接收进程的标识符。在因特网中，主机由其 IP 地址唯一标识，而接收进程则通过目的端口号来指定。端口号的相关内容将在第3章介绍，IP 协议的细节则在第4章展开。

### 运输服务
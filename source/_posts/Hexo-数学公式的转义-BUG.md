---
title: Hexo 数学公式的转义 BUG
date: 2025-08-06 17:50:39
description: 我的评价是：二次转义导致的。
categories: DEBUG
tags: [DEBUG, Latex]
---
在使用 Hexo 编写数学公式时，可能会遇到这样一个奇怪现象：

> **在行内公式中，`\{` 和 `\}` 无法正常显示花括号 `{}`。**

例如：
`SET(S) = \{ \$ \}` 渲染成 $ SET(S) = \{ \$ \} $  → ❌ 花括号不显示
`SET(S) = \\{ \$ \\}` 渲染成 $ SET(S) = \\{ \\$ \\} $ → ✅ 正常显示

## 原因分析

这是由于 Hexo 的渲染流程中存在 **多层解析**，导致 **转义层级冲突**：

1. **Hexo 使用 Markdown 渲染器先处理文本**  
   - 这些渲染器有时会将 `\{` 中的反斜杠提前处理或忽略。
   - 特别是当渲染器对 LaTeX 支持不完整时，`\{` 可能未被正确传递给 MathJax/KaTeX。

2. **MathJax/KaTeX 需要 `\{` 来显示 `{`**  
   - 在 LaTeX 中，`{` 是分组符号，要显示字面量 `{` 必须使用 `\{`。
   - 但如果 `\{` 没有完整传入 MathJax，它就无法识别。

## 解决方案：双重转义
   - 写 `\\{` 时，Markdown 渲染器会将 `\\` 解析为字面量 `\`，输出 `\{`。
   - 然后 MathJax 接收到 `\{`，正确渲染为 `{`。